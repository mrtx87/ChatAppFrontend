<div class="wrapper chat" *ngIf="displayedChatRoom">
    <div [ngClass]="displaySearchInput? 'searchOpen' : ''" class="chat-panel-header">
        <div class="chat-panel-left-container">
            <div class="chat-name-container">
                <div class="chat-img-container" *ngIf="displayedChatRoom" (click)="initDisplayProfile()"><img
                        class="chat-img" src="{{displayedChatRoom | img}}"></div>
                <div class="chat-name-member">
                    <span class="chat-name"> {{displayedChatRoom | chatRoomName}}</span>
                    <div class="chat-member-container" *ngIf="displayedChatRoom.groupChat">
                        <span *ngFor="let id of displayedChatRoom?.userIds; let i = index" class="chat-member">
                            {{ id | contactName}}
                            {{ (displayedChatRoom && i != displayedChatRoom.userIds.length-1) ? ',' : '' }}
                        </span>
                    </div>
                    <div class="chat-member-container" *ngIf="!displayedChatRoom.groupChat">
                        <span class="online-status"> {{ displayedChatRoom | onlineStatus }} </span>
                    </div>
                </div>
            </div>
        </div>

        <div class="chat-panel-right-container">
            <div class="menu-item-container">
                <div class="search-input-container" [hidden]="!displaySearchInput">
                    <input type="text" [(ngModel)]="searchInputField" placeholder="Was suchst du?">
                    <div><img (click)="previousResult()" src="assets/arrow-down.svg">
                    </div>
                    <div><img (click)="nextResult()" src="assets/arrow-up.svg">
                    </div>
                    <div class="counter">
                        {{ markedMessageCount > 0 ? markedMessageCount-markedMessageJumpIndex : '0'}}/{{markedMessageCount > 0 ? markedMessageCount : '0'}}
                    </div>
                </div>
                <div class="controller">
                    <div class="magnifier-img" (click)="toggleDisplaySearch()"></div>
                    <div class="close-img" src="assets/magnifier-glass.svg" (click)="toggleDisplaySearch()"></div>
                </div>
            </div>
            <div class="rightpanel-burger-menu" [ngClass]="displayRoomMenu ? 'active' : ''" tabindex="-1">
                <img (click)="toggleRoomMenuDisplay()" class="menu-img" src="assets/burger.svg">
                <div id="room-menu" *ngIf="displayRoomMenu" class="room-menu">
                    <div (click)="initDisplayProfile()" class="room-row sub-room-menu">
                        {{displayedChatRoom && displayedChatRoom.groupChat ? 'Gruppeninfo' : 'Nutzerprofil'}}
                    </div>
                    <div class="room-row sub-room-menu">
                        {{ 'choose_message' | tl8 }}
                    </div>
                    <div class="room-row sub-room-menu">
                        {{ 'clear_messages' | tl8 }}
                    </div>
                    <div class="room-row sub-room-menu">
                        {{ 'leave_group' | tl8 }}
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- CHAT AREA -->
    <div
        style="position:absolute; z-index: 1000; top:75px; width:100%; display: flex; justify-content: center; align-items: center; ">
        <div
            style=" box-shadow: 0px 1px 2px 0px rgba(0,0,0,0.3); background-color: #e1f5feeb;padding: 5px 9px; border-radius:5px;">
            {{(chatService.displayChatComponent.medianDateInView ? chatService.displayChatComponent.medianDateInView : '01.01.2001') | date : "dd.MM.yyyy"}}
        </div>
    </div>
    <app-displaychat id="app-displaychat" class="displaychat"></app-displaychat>
    <!-- CHAT AREA END-->

    <app-edit-group-profile *ngIf="constants.EDIT_GROUP_CHAT_PROFILE === currentDisplayedRightPanel"
        class="overlay-comp-container"
        [ngClass]="chatService.editGroupProfileComponent.slideOut ? 'animation-out-to-right' : 'animation-in-from-right'">
    </app-edit-group-profile>

    <app-contact-profile *ngIf="constants.CONTACT_PROFILE === currentDisplayedRightPanel" class="overlay-comp-container"
        [ngClass]="chatService.contactProfileComponent.slideOut ? 'animation-out-to-right' : 'animation-in-from-right'">
    </app-contact-profile>

    <div class="senden-container">

        <div class="emoji-container" [hidden]="!displayedChatRoom" [ngClass]="EmojiContainerState ? 'open' : ''">
            <div *ngFor="let icon of icons" style="margin:5px;">
                <div (click)="insertIconInChatInputText(icon)" [innerHTML]="icon?.dezCode"></div>
            </div>
        </div>

        <div class="bottom-container" [ngClass]="EmojiContainerState ? 'open' : ''">
            <div class="emoji-controller">
                <div><img (click)=EmojiContainerClose() src="assets/close.svg" [hidden]="!displayedChatRoom"></div>
                <div><img (click)=EmojiContainerOpen() src="assets/emoji.svg" [hidden]="!displayedChatRoom"></div>
                <div><img src="assets/gif.svg"></div>
                <div><img src="assets/img.svg"></div>
            </div>
            <div class="chatmessage-container">
                <div id="input-chat-messages" contenteditable="true" style="font-weight: normal;"
                    [hidden]="!displayedChatRoom"></div>
            </div>
            <img class="send" src="assets/paper-plane.svg" [hidden]="!displayedChatRoom"
                (click)="triggerSendChatMessage()">
        </div>
    </div>


</div>
<div class="wrapper home" *ngIf="!displayedChatRoom">
    <h1>{{ 'welcome' | tl8 }}</h1>
</div>


<!-- NOCH DEBUG -->